{#-
Copyright 2016 SÃ©bastien Maccagnoni-Munch

This file is part of AwesomeShop.

AwesomeShop is free software: you can redistribute it and/or modify it under
the terms of the GNU Affero General Public License as published by the
Free Software Foundation, either version 3 of the License, or (at your
option) any later version.

AwesomeShop is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more
details.

You should have received a copy of the GNU Affero General Public License
along with AwesomeShop. If not, see <http://www.gnu.org/licenses/>.
#}
<!DOCTYPE html>
<html trigger-auth enable-error-handler>
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8">
<meta name="generator" content="AwesomeShop">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<base href="/">
<link href="/static/libs/angular-bootstrap-lightbox.min.css" rel="stylesheet">
<link href="/static/libs/bootstrap.min.css" rel="stylesheet">
<link href="/static/libs/font-awesome.min.css" rel="stylesheet">
<link href="/static/awesomeshop/common.css" rel="stylesheet">
<link href="/static/awesomeshop/shop.css" rel="stylesheet">
<script src="/static/libs/angular.min.js"></script>
<script src="/static/libs/l10n/angular-locale_{{ get_locale() }}.js"></script>
<script src="/static/libs/angular-animate.min.js"></script>
<script src="/static/libs/angular-bootstrap-lightbox.min.js"></script>
{#
<script src="/static/libs/angular-file-upload.min.js"></script>
#}
<script src="/static/libs/angular-scroll.min.js"></script>
{#
<script src="/static/libs/angular-sortable-view.min.js"></script>
#}
<script src="/static/libs/angular-ui-router.min.js"></script>
<script src="/static/libs/angular-validation-match.min.js"></script>
<script src="/static/libs/http-auth-interceptor.js"></script>
<script src="/static/libs/ngStorage.min.js"></script>
<script src="/static/libs/ui-bootstrap-tpls-1.2.4.min.js"></script>
<script src="/static/awesomeshop/common.js"></script>
<script src="/static/awesomeshop/shop/page.js"></script>
<script src="/static/awesomeshop/shop/shop.js"></script>
<script src="/static/awesomeshop/shop/user.js"></script>
<script src="/static/awesomeshop/shop.js"></script>
<title ng-controller="TitleCtrl" ng-bind="( ( title.get() | translate ) || '{{ _('Home') }}' ) + ' - {{ config.SHOP_NAME }}'">{{ config.SHOP_NAME }}</title>
</head>
<body>
<div id="spinner">
    <i class="fa fa-spinner fa-pulse fa-5x text-primary"></i>
</div>
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" ui-sref="index">{{ config.SHOP_DESCRIPTION[locale] }}</a>
        </div>
        <p class="navbar-text navbar-right" ng-controller="UserCtrl" ng-cloak>
            <span ng-if="u.get_user().is_admin">
                <a class="navbar-link" href="/dashboard" target="_blank"><i class="fa fa-tachometer"></i> {{ _('Dashboard') }}</a> |
            </span>
            <span ng-show="u.get_user().auth">
                <a class="navbar-link" ui-sref="profile"><i class="fa fa-user"></i> [[ u.get_user().email ]]</a> |
                <a class="navbar-link" href="" ng-click="u.logout()"><i class="fa fa-sign-out"></i> {{ _('Logout') }}</a>
            </span>
            <span ng-hide="u.get_user().auth">
                <a class="navbar-link" href="" ng-click="u.forcelogin()"><i class="fa fa-sign-in"></i> {{ _('Login') }}</a> |
                <a class="navbar-link" href="" ng-click="u.register()"><i class="fa fa-user-plus"></i> {{ _('Register') }}</a>
            </span>
            {%- for lang in config.LANGS %}
            {%- if lang != locale %} |
            <a class="navbar-link" href="" ng-click="u.setlang('{{ lang }}')">{{ lang }}</a>
            {%- endif %}
            {%- endfor %}
        </p>
    </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col-sm-6">
            {% include ['local/logo.html', 'placeholder/logo.html'] ignore missing %}
        </div>
        <div class="col-sm-6 text-right hidden-print">
            <form method="GET" action="" class="form-inline">{# XXX form to search #}
                <div class="form-group bottom-space">
                <div class="input-group">
                    <input type="text" name="q" class="form-control" placeholder="{{ _('Search for...') }}">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="submit">
                            <i class="fa fa-search"></i>
                            {{ _('Search') }}
                        </button>
                    </span>
                </div>
                </div>
            </form>
            <a href="" class="btn btn-primary btn-lg bottom-space" ng-controller="CartButtonCtrl" ng-class="{ disabled: !cart.count() }" ng-cloak> {# XXX link to cart #}
                <i class="fa fa-shopping-cart"></i>&nbsp;
                <span ng-hide="cart.count()">{{ _('Cart is empty' ) }}</span>
                <span ng-show="cart.count()">{{ _('[[ cart.count() ]] products') }} [[ cart.amount() | currency:"{{ config.CURRENCY }}" ]]</span>
            </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3 col-sm-4 leftmenu hidden-print">
            <div class="panel panel-default" ng-controller="CategoriesListCtrl">
                <div class="panel-heading">
                    <i class="fa fa-list"></i>
                    {{ _('Categories') }}
                </div>
                <div class="list-group" ng-cloak>
                    <a ui-sref="new_products" ui-sref-active="active" class="list-group-item">
                        <span class="category_hierarchy_0">
                            {{ _('New products') }}
                        </span>
                    </a>
                    <a ui-sref="category_or_product({path:category.path})" ui-sref-active="active" class="list-group-item" ng-repeat="category in categories.get()">
                        <span class="badge" ng-show="category.products">[[ category.products ]]</span>
                        <span class="category_hierarchy_[[ category.level ]]">
                            [[ category.name ]]
                        </span>
                    </a>
                </div>
            </div>
            <div class="panel panel-default" ng-controller="DocsListCtrl">
                <div class="panel-heading">
                    <i class="fa fa-book"></i>
                    {{ _('Documentation') }}
                </div>
                <div class="list-group" ng-cloak>
                    <a ui-sref="doc({slug:page.slug})" ui-sref-active="active" class="list-group-item" ng-repeat="page in docs.get()" ng-if="page.in_menu">
                        [[ page.title ]]
                    </a>
                </div>
            </div>
            <div class="panel panel-default" ng-controller="UserCtrl">
                <div class="panel-heading">
                    <i class="fa fa-user"></i>
                    {{ _('My account') }}
                </div>
                <div class="list-group" ng-if="u.get_user().auth" ng-cloak>
                    <a class="list-group-item" ui-sref="profile" ui-sref-active="active">
                        {{ _('My profile') }}
                    </a>
                    <a class="list-group-item" href="">{# XXX link to orders #}
                        <span class="badge">{# number of orders #}</span>
                        {{ _('My orders') }}
                    </a>
                    <a class="list-group-item" href="">{# XXX link to carts #}
                        <span class="badge">{# XXX Number of saved carts #}</span>
                        {{ _('My saved carts') }}
                    </a>
                </div>
                <div class="list-group" ng-if="!u.get_user().auth" ng-cloak>
                    <a class="list-group-item" href="" ng-click="u.forcelogin()">
                        {{ _('Login') }}
                    </a>
                    <a class="list-group-item" href="" ng-click="u.register()">
                        {{ _('Register') }}
                    </a>
                </div>
            </div>
            <div class="panel panel-default" ng-controller="InfosListCtrl">
                <div class="panel-heading">
                    <i class="fa fa-file"></i>
                    {{ _('Information') }}
                </div>
                <div class="list-group" ng-cloak>
                    <a ui-sref="info({slug:page.slug})" ui-sref-active="active" class="list-group-item" ng-repeat="page in infos.get()">
                        [[ page.title ]]
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-9 col-sm-8 col-print-12">
            <div class="alert alert-danger hidden-print" ng-controller="UserCtrl" role="alert" ng-show="u.get_user().waiting_for_confirmation" ng-cloak>
                <p>{{ _('Please confirm your email address by clicking on the link in the email you have received.') }}</p>
                <p><i>
                    {{ _('You have not received the validation email?') }}
                    <a href="" ng-click="u.resend_confirmation()">{{ _('Send it again') }}</a>
                </i></p>
            </div>
            <ui-view>
            </ui-view>
        </div>
    </div>
</div>
<div class="navbar navbar-inverse navbar-static-bottom">
  <div class="container">
        <p class="navbar-text navbar-right lead">
            <b>{{ _('Follow us...') }}</b>
            {%- if config.FACEBOOK_ACCOUNT %}
            <a href="https://www.facebook.com/{{ config.FACEBOOK_ACCOUNT }}"><i class="fa fa-facebook-square"></i></a>
            {%- endif %}
            {%- if config.TWITTER_ACCOUNT %}
            <a href="https://www.twitter.com/{{ config.TWITTER_ACCOUNT }}"><i class="fa fa-twitter-square"></i></a>
            {%- endif %}
            {%- if config.BLOG_URL %}
            <a href="{{ config.BLOG_URL }}"><i class="fa fa-rss-square"></i></a>
            {%- endif %}
        </p>
  </div>
</div>
</body>
</html>
