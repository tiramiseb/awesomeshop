{#-
Copyright 2015-2016 SÃ©bastien Maccagnoni-Munch

This file is part of AwesomeShop.

AwesomeShop is free software: you can redistribute it and/or modify it under
the terms of the GNU Affero General Public License as published by the
Free Software Foundation, either version 3 of the License, or (at your
option) any later version.

AwesomeShop is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more
details.

You should have received a copy of the GNU Affero General Public License
along with AwesomeShop. If not, see <http://www.gnu.org/licenses/>.
#}
<div ng-repeat-start="product in products" class="col-xs-6 col-md-4 col-lg-3" ng-controller="ProductInListCtrl" ng-cloak>
    <div class="thumbnail product-in-grid">
        <a href="[[ product.path ]]">
            <img ng-src="[[ product.main_photo.preview_url ]]" ng-show="product.main_photo">
            <div class="caption">
                <p class="text-center">[[ product.name || product.slug ]]</p>
                <p class="text-center bottom-no-space">[[ product.net_price | currency:"{{ config.CURRENCY }}" ]]</p>
            </div>
        </a>
            <div class="caption">
                <button type="button" class="btn btn-success btn-block" ng-if="cart.stock(product) || product.on_demand" ng-class="{ 'btn-success': cart.stock(product), 'btn-info': product.on_demand && !cart.stock(product) }" ng-click="cart.add(product, 1)">
                    {{ _('Add to cart') }}
                </button>
                <button type="button" class="btn btn-danger btn-block disabled" ng-if="!(cart.stock(product) || product.on_demand)">
                    {{ _('Out of stock') }}
                </button>
                <p class="text-center bottom-no-space" ng-if="cart.stock(product)==0&&product.on_demand">
                    {{ _('Available on demand, delay %(min)d-%(max)d days', min=config.ON_DEMAND_DELAY_MIN, max=config.ON_DEMAND_DELAY_MAX) }}
                </p>
            </div>
    </div>
</div>
<div class="clearfix visible-lg-block" ng-if="($index+1)%4==0"></div>
<div class="clearfix visible-md-block" ng-if="($index+1)%3==0"></div>
<div ng-repeat-end class="clearfix visible-xs-block visible-sm-block" ng-if="($index+1)%2==0"></div>
