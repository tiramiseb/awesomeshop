<form name="form" ng-submit="submit()" novalidate="novalidate"><h1>{{ 'PRODUCT_' | translate }} {{ product.slug }}<a href="/[[ product.path ]]" ng-disabled="form.$dirty" class="pull-right btn btn-sm btn-info">{{ 'VIEW' | translate }}</a></h1><div class="row"><div class="col-md-3 col-xs-6"><div ng-class="{ 'has-error': form.slug.$invalid && !form.slug.$pristine }" class="form-group"><label for="slug">{{ 'SLUG' | translate }}</label><input name="slug" ng-model="product.slug" required="required" id="slug" class="form-control"/><p ng-show="form.slug.$invalid" class="text-danger">{{ 'SLUG_MANDATORY' | translate }}</p></div></div><div class="col-md-3 col-xs-6"><div ng-class="{ 'has-error': form.reference.$invalid && !form.reference.$pristine }" class="form-group"><label for="reference">{{ 'REFERENCE' | translate }}</label><input name="reference" ng-model="product.reference" required="required" id="reference" class="form-control"/><p ng-show="form.reference.$invalid" class="text-danger">{{ 'REFERENCE_MANDATORY' | translate }}</p></div></div><div class="col-md-3 col-xs-6"><div ng-class="{ 'has-error': form.category.$invalid && !form.category.$pristine }" class="form-group"><label for="category">{{ 'CATEGORY' | translate }}</label><input name="category" type="text" ng-model="displayablecategories" uib-typeahead="category as category.full_name for category in categories | filter:{ full_name: $viewValue }" typeahead-editable="false" typeahead-min-length="0" typeahead-on-select="product.category=$item.id" required="required" id="category" class="form-control"/><p ng-show="form.category.$invalid" class="text-danger">{{ 'CATEGORY_MANDATORY' | translate }}</p></div></div><div class="col-md-3 col-xs-6"><div ng-class="{ 'has-error': form.documentation.$invalid && !form.documentation.$pristine }" class="form-group"><label for="documentation">{{ 'DOCUMENTATION' | translate }}</label><input name="documentation" type="text" ng-model="displayabledocumentations" uib-typeahead="documentation as documentation.title for documentation in documentations | filter:{ title: $viewValue }" typeahead-editable="false" typeahead-min-length="0" typeahead-on-select="product.documentation=$item.id" required="required" id="documentation" class="form-control"/><p ng-show="form.documentation.$invalid" class="text-danger">{{ 'DOCUMENTATION_MANDATORY' | translate }}</p></div></div></div><div class="row"><div class="col-md-9"><div class="form-group"><label for="keywords">{{ 'KEYWORDS' | translate }}</label><input name="keywords" ng-model="product.keywords" id="keywords" class="form-control"/></div></div><div class="col-md-3"><div class="form-group"><label for="on_sale">{{ 'ON_SALE' | translate }}</label><button type="button" ng-class="{'btn-success': product.on_sale, 'btn-danger': !product.on_sale }" ng-model="product.on_sale" uib-btn-checkbox="uib-button-checkbox" class="btn form-control"><span ng-show="product.on_sale">{{ 'ON_SALE' | translate }}</span><span ng-hide="product.on_sale">{{ 'ON_SALE_NO' | translate }}</span></button></div></div></div><div class="row"><div ng-repeat="lang in langs" class="col-sm-6"><div class="panel panel-default"><div class="panel-heading">{{ lang }}</div><div class="panel-body"><div class="form-group"><label for="name{{ lang }}">{{ 'NAME' | translate }}</label><div class="input-group"><input id="name{{ lang }}" name="name{{ lang }}" ng-model="product.name[lang]" class="form-control"/><span class="input-group-btn"><button type="button" ng-click="slug_from(product.name[lang])" class="btn btn-primary">{{ 'TO_SLUG' | translate }}</button></span></div></div><div class="form-group"><label for="description{{ lang }}">{{ 'DESCRIPTION' | translate }}</label><textarea id="description{{ lang }}" name="description{{ lang }}" ng-model="product.description[lang]" class="form-control"></textarea></div></div></div></div></div><uib-accordion><div uib-accordion-group="uib-accordion-group" heading="{{ 'RELATED_PRODUCTS' | translate }} ({{ product.related_products.length }})" class="panel-default"><div class="row"><div class="col-xs-6"><div class="panel panel-default"><div class="panel-heading">{{ 'SELECTED' | translate }}</div><div class="list-group"><button type="button" ng-repeat="prodid in product.related_products" ng-click="remove_related_product(prodid)" class="list-group-item">{{ product_name_from_id(prodid) }}<span class="pull-right"><i class="fa fa-arrow-right"></i></span></button></div></div></div><div class="col-xs-6"><div class="panel panel-default"><div class="panel-heading">{{ 'AVAILABLE' | translate }}</div><div class="list-group"><input type="text" ng-model="unrelated_query" placeholder="{{ 'FILTER' | translate }}" class="list-group-item"/><button type="button" ng-repeat="prod in unrelated_products() | filter:unrelated_query" ng-click="add_related_product(prod.id)" class="list-group-item"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;{{ prod.name || prod.slug }}</button></div></div></div></div></div></uib-accordion><div class="panel panel-default"><div class="panel-heading">{{ 'PRODUCTS_IN_KIT' | translate }}</div><div sv-root="sv-root" sv-part="product.products" sv-on-sort="form.$setdirty();" id="included_products" class="panel-body"><div ng-repeat="subproduct in product.products" sv-element="{containment:'#included_products'}" class="panel panel-default"><div sv-handle="sv-handle" class="panel-heading form-inline"><i class="fa fa-bars"></i> <input type="text" ng-model="subproduct.title" placeholder="{{ 'ITEM_N_X' | translate:{IDX: $index} }}" class="form-control"/></div><div id="options{{ $index }}" sv-root="sv-root" sv-part="subproduct.options" sv-on-sort="form.$setdirty();" class="list-group"><div ng-repeat="option in subproduct.options" sv-element="{containment:'#options'+$parent.$index}" class="list-group-item handle"><div class="row"><div class="col-xs-3 col-md-2 col-lg-1"><input type="number" id="qty-{{ $parent.$index }}-{{ $index }}" name="qty-{{ $parent.$index }}-{{ $index }}" min="1" ng-model="option.quantity" class="form-control"/></div><div class="col-xs-5 col-md-6 col-lg-7"><img ng-show="option.product.main_photo" ng-src="{{ option.product.main_photo.thumbnail_url }}"/> {{ option.product.name || option.product.slug }}</div><div class="col-xs-4 text-right"><div class="btn-group"><button type="button" ng-class="{'btn-success': subproduct.default == option.quantity.toString() + '*' + option.product.id, 'btn-warning': subproduct.default != option.quantity.toString() + '*' + option.product.id}" ng-model="subproduct.default" uib-btn-radio="option.quantity.toString() + '*' + option.product.id" class="btn btn-sm"><i ng-class="{'fa-check': subproduct.default == option.quantity.toString() + '*' + option.product.id, 'fa-times': subproduct.default != option.quantity.toString() + '*' + option.product.id }" class="fa"></i> <span class="hidden-xs hidden-sm">{{ 'DEFAULT' | translate }}</span></button><button type="button" ng-click="subproduct.options.splice($index, 1);form.$setDirty();" class="btn btn-sm btn-danger"><i class="fa fa-trash"></i> <span class="hidden-xs hidden-sm">{{ 'REMOVE' | translate }}</span></button></div></div></div></div><div class="list-group-item"><div class="row"><div class="col-md-6"><div class="btn-group"><button type="button" ng-click="product.products.splice($index, 1);form.$setDirty();" class="btn btn-sm btn-danger"><i class="fa fa-trash"></i><span class="hidden-xs hidden-sm">{{ 'REMOVE' | translate }}</span></button><button type="button" ng-model="subproduct.can_be_disabled" uib-btn-checkbox="uib-btn-checkbox" class="btn btn-sm btn-info"><i ng-class="{'fa-check': subproduct.can_be_disabled, 'fa-times': !subproduct.can_be_disabled}" class="fa"></i> {{ 'ALLOW_EMPTY' | translate }}</button><button type="button" ng-class="{'btn-success': subproduct.default == 'none', 'btn-warning': subproduct.default != 'none'}" ng-model="subproduct.default" uib-btn-radio="'none'" ng-if="subproduct.can_be_disabled" class="btn btn-sm"><i ng-class="{'fa-check': subproduct.default == 'none', 'fa-times': subproduct.default != 'none'}" class="fa"></i> {{ 'EMPTY_AS_DEFAULT' | translate }}</button></div></div><div class="col-md-6 text-right"><div class="input-group"><input type="text" placeholder="{{ 'PRODUCT' | translate }}" ng-model="subproduct.to_add" uib-typeahead="product as product.name for product in products | filter:{name:$viewValue}" typeahead-editable="false" typeahead-min-length="0" class="form-control"/><span class="input-group-btn"><button type="button" ng-click="subproduct.options.push({quantity: 1, product: subproduct.to_add});subproduct.to_add=undefined;form.$setDirty();" ng-disabled="!subproduct.to_add" class="btn btn-primary"><i class="fa fa-plus"></i> {{ 'ADD_OPTION' | translate }}</button></span></div></div></div></div></div></div><button type="button" ng-click="product.products.push({options:[], can_be_disabled:false})" class="btn btn-success pull-right"><i class="fa fa-plus"></i> {{ 'ADD_ITEM' | translate }}</button></div></div><div class="panel panel-default"><div class="panel-heading">{{ 'PRICING' | translate }}</div><div class="panel-body"><div class="row"><div class="col-md-6"><div class="form-group"><label for="price_variation">{{ 'PRICE_VARIATION' | translate }}</label><div class="input-group"><input type="text" name="price_variation" ng-model="product.price_variation" id="price_variation" class="form-control"/><span class="input-group-btn"><button type="button" ng-model="product.amount_instead_of_percent" uib-btn-checkbox="uib-btn-checkbox" class="btn btn-default"><span ng-show="product.amount_instead_of_percent">{{ CONFIG.currency }}</span><span ng-hide="product.amount_instead_of_percent">%</span></button></span></div></div></div><div class="col-md-6"><div class="form-group"><label for="gross_price">{{ 'GROSS_PRICE' | translate }}</label><div class="input-group"><input type="text" name="gross_price" ng-value="gross_price()" disabled="disabled" id="gross_price" class="form-control"/><span class="input-group-addon">{{ CONFIG.currency }}</span></div></div></div><div class="col-md-6"><div ng-class="{ 'has-error' : form.tax.$invalid && !form.tax.$pristine }" class="form-group"><label for="tax">{{ 'TAX' | translate }}</label><select name="tax" ng-model="product.tax" ng-options="tax.id as tax.name for tax in taxrates" required="required" id="tax" class="form-control"></select></div><p ng-show="form.tax.$invalid" class="text-danger">{{ 'TAX_MANDATORY' | translate }}</p></div><div class="col-md-6"><div class="form-group"><label for="net_price">{{ 'NET_PRICE' | translate }}</label><div class="input-group"><input type="text" name="net_price" ng-value="net_price()" disabled="disabled" id="net_price" class="form-control"/><span class="input-group-addon">{{ CONFIG.currency }}</span></div></div></div></div></div></div><div id="pictures" class="panel panel-default"><div class="panel-heading">{{ 'PICTURES' | translate }}</div><div class="panel-body"><div sv-root="sv-root" sv-part="photos" sv-on-sort="sort_photo($indexFrom, $indexTo)" id="photos" class="row"><div ng-repeat="photo in photos" sv-element="photos_sortoptions" class="col-xs-6 col-sm-4 col-md-3 col-lg-2"><div sv-handle="sv_handle" class="thumbnail"><img ng-src="{{ photo.thumbnail_url }}" onmousedown="return false;"/><div class="caption text-center"><button type="button" ng-click="delete_photo(photo.filename, $index)" class="btn btn-danger"><i class="fa fa-trash"></i> {{ 'REMOVE' | translate }}</button></div></div></div></div><div ng-if="product.id"><hr/><input type="file" nv-file-select="nv-file-select" uploader="uploader"/></div><p ng-hide="product.id">{{ 'SAVE_BEFORE_IMAGES' | translate }}</p></div></div><div id="internal-note" class="panel panel-default"><div class="panel-heading">{{ 'INTERNAL_NOTE' | translate }}</div><div class="panel-body"><div ng-class="{ 'has-error': form.internal_note.$invalid && !form.internal_note.$pristine }" class="form-group"><textarea name="internal_note" ng-model="product.internal_note" id="internal_note" class="form-control"></textarea></div></div></div><div id="page-buttons"><button type="submit" uib-tooltip="{{ 'SAVE' | translate }}" ng-disabled="form.$invalid" class="btn btn-link"><i class="fa fa-check-circle fa-4x text-success"></i></button><button type="button" ng-click="delete()" uib-tooltip="{{ 'REMOVE' | translate }}" class="btn btn-link"><i class="fa fa-times-circle fa-4x text-danger"></i></button><a ui-sref="products" uib-tooltip="{{ 'BACK' | translate }}" class="btn btn-link"><i ng-class="{'text-primary': form.$pristine, 'text-danger': form.$dirty }" class="fa fa-arrow-circle-left fa-4x"></i></a></div></form>