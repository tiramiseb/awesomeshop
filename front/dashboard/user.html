<form name="form" ng-submit="submit()" novalidate="novalidate"><h1>{{ 'USER_' | translate }} {{ form.email.$valid || form.email.$pristine ? user.email : 'INCORRECT_EMAIL' | translate }}</h1><div class="row"><div class="col-xs-8 col-md-4"><div ng-class="{ 'has-error': form.email.$invalid && !form.email.$pristine }" class="form-group"><label for="email">{{ 'EMAIL_ADDRESS' | translate }}</label><input type="email" name="email" ng-model="user.email" required="required" id="email" class="form-control"/><p ng-show="form.email.$invalid" class="text-danger">{{ 'INCORRECT_EMAIL' | translate }}</p></div></div><div class="col-xs-4 col-md-2"><div class="form-group"><label for="is_admin">{{ 'IS_ADMIN' | translate }}</label><button type="button" ng-class="{'btn-success': user.is_admin, 'btn-danger': !user.is_admin }" ng-model="user.is_admin" uib-btn-checkbox="uib-btn-checkbox" class="btn form-control"><span ng-show="user.is_admin">{{ 'IS_ADMIN' | translate }}</span><span ng-hide="user.is_admin">{{ 'IS_ADMIN_NO' | translate }}</span></button></div></div><div class="col-xs-6 col-md-3"><div ng-class="{ 'has-error': form.password.$invalid && !form.password.$pristine }" class="form-group"><label for="password">{{ 'PASSWORD' | translate }}</label><input type="password" name="password" ng-model="user.password" ng-required="!user.id" id="password" class="form-control"/><p ng-show="form.password.$invalid" class="text-danger">{{ 'PASSWORD_MANDATORY' | translate }}</p></div></div><div class="col-xs-6 col-md-3"><div ng-class="{ 'has-error': form.password2.$invalid && !form.password2.$pristine }" class="form-group"><label for="password2">{{ 'PASSWORD_AGAIN' | translate }}</label><input type="password" name="password2" ng-model="user.password_confirm" match="user.password" id="password2" class="form-control"/><p ng-show="form.password2.$invalid" class="text-danger">{{ 'PASSWORDS_MUST_MATCH' | translate }}</p></div></div></div><h2>{{ 'ADDRESSES' | translate }}</h2><uib-accordion><div uib-accordion-group="uib-accordion-group" ng-repeat="address in user.addresses" heading="{{ address.title || 'UNTITLED_ADDRESS' | translate }}" is-open="address.new" class="panel-default"><div class="row"><div class="col-sm-6"><div ng-class="{ 'has-error': form.address_t_{{ $index }}.$invalid && !form.address_t_{{ $index }}.$pristine }" class="form-group"><label for="address_t_{{ $index }}">{{ 'ADDRESS_TITLE' | translate }}</label><input id="address_t_{{ $index }}" name="address_t_{{ $index }}" ng-model="address.title" required="required" class="form-control"/><p ng-show="form.address_t_{{ $index }}.$invalid" class="text-danger">{{ 'TITLE_MANDATORY' | translate }}</p></div><div class="row"><div class="col-xs-6"><div class="form-group"><label for="address_f_{{ $index }}">{{ 'FIRST_NAME' | translate }}</label><input id="address_f_{{ $index }}" name="address_f_{{ $index }}" ng-model="address.firstname" class="form-control"/></div></div><div class="col-xs-6"><div ng-class="{ 'has-error': form.address_l_{{ $index }}.$invalid && !form.address_l_{{ $index }}.$pristine }" class="form-group"><label for="address_l_{{ $index }}">{{ 'LAST_NAME' | translate }}</label><input id="address_l_{{ $index }}" name="address_l_{{ $index }}" ng-model="address.lastname" required="required" class="form-control"/><p ng-show="form.address_l_{{ $index }}.$invalid" class="text-danger">{{ 'LAST_NAME_MANDATORY' | translate }}</p></div></div></div><div class="form-group"><label for="address_p_{{ $index }}">{{ 'PHONE' | translate }}</label><input id="address_p_{{ $index }}" name="address_p_{{ $index }}" ng-model="address.phone" class="form-control"/></div></div><div class="col-sm-6"><div ng-class="{ 'has-error': form.address_a_{{ $index }}.$invalid && !form.address_a_{{ $index }}.$pristine }" class="form-group"><label for="address_a_{{ $index }}">{{ 'ADDRESS' | translate }}</label><textarea id="address_a_{{ $index }}" name="address_a_{{ $index }}" ng-model="address.address" required="required" class="form-control small-textarea"></textarea><p ng-show="form.address_a_{{ $index }}.$invalid" class="text-danger">{{ 'ADDRESS_MANDATORY' | translate }}</p></div><div ng-class="{ 'has-error': form.address_c_{{ $index }}.$invalid && !form.address_c_{{ $index }}.$pristine }" class="form-group"><label for="address_c_{{ $index }}">{{ 'COUNTRY' | translate }}</label><select id="address_c_{{ $index }}" name="address_c_{{ $index }}" ng-model="address.country" ng-options="country.code as prefixed(country) for country in countries" required="required" class="form-control"></select><p ng-show="form.address_l_{{ $index }}.$invalid" class="text-danger">{{ 'COUNTRY_MANDATORY' | translate }}</p></div><button type="button" ng-click="user.addresses.splice($index, 1)" class="btn btn-danger pull-right"><i class="fa fa-trash"></i> {{ 'REMOVE' | translate }}</button></div></div></div></uib-accordion><button type="button" ng-click="user.addresses.push({new:true})" class="btn btn-success"><i class="fa fa-plus"></i>{{ 'ADD_ADDRESS' | translate }}</button><h2>{{ 'SAVED_CARTS' | translate }}</h2><uib-accordion><div uib-accordion-group="uib-accordion-group" ng-repeat="cart in user.carts" heading="{{ cart.name }} ({{ cart.date | date }})" class="panel-default"><div class="panel panel-default"><div class="panel-heading"><div class="row"><div class="col-sm-6"><i class="fa fa-cube"></i> {{ 'PRODUCT' | translate }}</div><div class="col-xs-4 col-sm-2 text-right">{{ 'QTY' | translate }}</div><div class="col-xs-4 col-sm-2 text-right">{{ 'UNIT' | translate }}</div><div class="col-xs-4 col-sm-2 text-right">{{ 'TOTAL' | translate }}</div></div></div><div class="list-group"><div ng-repeat="line in cart.lines" uib-popover-template="'/common/product_'+line.product.type+'_popup.html'" popover-trigger="mouseenter" popover-enable="line.product.details" class="list-group-item"><div class="row"><div class="col-sm-6">{{ line.product.name }}</div><div class="col-xs-4 col-sm-2 text-right">{{ line.quantity }}</div><div class="col-xs-4 col-sm-2 text-right">{{ line.product.net_price | currency:CONFIG.currency }}</div><div class="col-xs-4 col-sm-2 text-right">{{ line.product.net_price * line.quantity | currency:CONFIG.currency }}</div></div></div></div></div></div></uib-accordion><div id="page-buttons"><button type="submit" uib-tooltip="{{ 'SAVE' | translate }}" ng-disabled="form.$invalid" class="btn btn-link"><i class="fa fa-check-circle fa-4x text-success"></i></button><button type="button" ng-click="delete()" uib-tooltip="{{ 'REMOVE' | translate }}" class="btn btn-link"><i class="fa fa-times-circle fa-4x text-danger"></i></button><a ui-sref="users" uib-tooltip="{{ 'BACK' | translate }}" class="btn btn-link"><i ng-class="{'text-primary': form.$pristine, 'text-danger': form.$dirty }" class="fa fa-arrow-circle-left fa-4x"></i></a></div></form>